import{b as i,o as r,w as u,i as t,g as e,ad as a,v as p,x as m,T as n}from"./modules/vue-DEaRH3w8.js";import{I as c}from"./slidev/default-Bi0FEvN2.js";import{u as g,f as $}from"./slidev/context-DeYWqSxv.js";import"./index-Bf5OblZE.js";import"./modules/shiki-BCEN78oY.js";const C={__name:"slides.md__slidev_15",setup(d){const{$clicksContext:s,$frontmatter:o}=g();return s.setup(),(f,l)=>(r(),i(c,p(m(n($)(n(o),14))),{default:u(()=>[t(" # 高度な使用例 - 条件の組み合わせ "),t(""),t(" <ul v-pre> "),t(" <li>all : すべての条件を満たす</li> "),t(" <li>any : いずれかの条件を満たす</li> "),t(" <li>not : 条件を満たさない</li> "),t(" <li>inside : 特定のスコープ内</li> "),t(" </ul> "),t(""),t(" ```yaml "),t(" id: complex-pattern "),t(" language: js "),t(" rule: "),t("   all: "),t("     - pattern: if ($COND) console.$METHOD($$$) "),t("     - not: "),t("         pattern: if (process.env.DEBUG) console.log($$$) "),t("   any: "),t("     - inside: "),t("         pattern: function $FUNC($$$) { $$$ } "),t(" message: Non-production console statement found "),t(" ``` "),t(""),t(" --- "),t(""),t(" # 高度な使用例 - スコープ検索 "),t(""),t(" <TwoColumnLayout> "),t("   <template #left> "),t(""),t(" <ul v-pre> "),t(" <li>特定のswitch caseの処理を検索</li> "),t(" <li>関数内の特定パターンのみ検出</li> "),t(" <li>クラスメソッド内の処理を検索</li> "),t(" </ul> "),t(""),t("   </template> "),t("   <template #right> "),t(""),t(" ```yaml "),t(" id: find-in-switch "),t(" language: js "),t(" rule: "),t("   pattern: | "),t("     switch ($EXPR) { "),t("       $$$ "),t('       case "root": { $$$BODY } '),t("       $$$ "),t("     } "),t(" ``` "),t(""),t("   </template> "),t(" </TwoColumnLayout> "),t(""),t(" --- "),t(""),t(" # メタ変数の高度な使用法 "),t(""),t(" **パターン:** "),t(" ```javascript "),t(" $ARR[$ARR.length - 1] "),t(" ``` "),t(""),t(" **重要:** $ARR が2回出現 = **同じ変数**である必要がある "),t(""),t(" **マッチする:** "),t(" ```javascript "),t(" lines[lines.length - 1]  // ✅ lines が2回 "),t(" words[words.length - 1]  // ✅ words が2回 "),t(" ``` "),t(""),t(" **マッチしない:** "),t(" ```javascript "),t(" lines[words.length - 1]  // ❌ 異なる変数 "),t(" ``` "),t(""),t(" --- "),t(" # セキュリティチェックの例 "),t(""),t(" <TwoColumnLayout> "),t("   <template #left> "),t(""),t(" **Node.jsでの典型的な脆弱性:** "),t(""),t(" ```javascript "),t(" // コマンドインジェクション "),t(" exec('cat ' + userInput, cb);  // 危険 "),t(""),t(" // eval使用 "),t(" eval(getUserInput());  // 危険 "),t(""),t(" // パストラバーサル "),t(" fs.readFile('./uploads/' + file, cb);  // 危険 "),t(" ``` "),t(""),t("   </template> "),t("   <template #right> "),t(""),t(" **検出ルール例:** "),t(" ```yaml "),t(" id: detect-command-injection "),t(" language: js "),t(" rule: "),t("   pattern: exec($STR + $VAR, $$$) "),t(" message: Potential command injection "),t(" severity: error "),t(" ``` "),t(""),t("   </template> "),t(" </TwoColumnLayout> "),t(""),t(" --- "),t(" # ast-grepの特徴 "),t(""),t(" | 特徴 | 説明 | "),t(" |------|------| "),t(" | **高精度** | コードの構造を理解、誤検出が少ない | "),t(" | **フォーマット非依存** | インデント・改行に左右されない | "),t(" | **構造保持** | 構造を保ったまま変更可能 | "),t(" | **一括変更** | 大規模なリファクタリングに対応 | "),t(" | **多言語対応** | JS, TS, Rust, Python, Go等 | "),t(""),t(" --- "),t(""),t(" # ast-grepの特性 "),t(""),t(" **特性:** "),t(" - **学習コスト**: パターン構文の習得が必要 "),t(" - **パフォーマンス**: 大規模コードベースでは処理時間がかかる "),t(" - **言語依存**: パーサーが必要（対応言語は限定的） "),t(" - **複雑な構造**: 非常に複雑なパターンは表現が難しい "),t(""),t(" **使い分け:** "),t(" - シンプルな文字列検索 → `grep` "),t(" - コード構造の検索・置換 → `ast-grep` "),t(""),t(" --- "),l[0]||(l[0]=e("h1",null,"総じて好きなところ",-1)),l[1]||(l[1]=e("ul",null,[e("li",null,[a("検索パターンをymlで管理, 共有できる "),e("ul",null,[e("li",null,"情報が永続化して読み取り可能であることはAgenticCodgingにとって重要だと思っている")])]),e("li",null,"構文木で一致するコードの一括置換が可能である"),e("li",null,[a("特定言語に依存しない汎用ツールである "),e("ul",null,[e("li",null,"構文解析可能であれば"),e("li",null,"個別のCustomLintを理解するよりも汎用的な仕組みかな？と思う")])]),e("li",null,"astに関する知識の隠蔽, toolとしてのinterfaceが優れているなと思う")],-1)),t(" --- "),t(""),t(" # install "),t(""),t(" **インストール:** "),t(" ```bash "),t(" # macOS (Homebrew) "),t(" brew install ast-grep "),t(""),t(" # bun "),t(""),t(" bun install @ast-grep/cli "),t(""),t(" # cargo "),t(" cargo install ast-grep "),t(" ``` "),t(""),t(" **動作確認:** "),t(" ```bash "),t(" ast-grep --version "),t(" ``` "),t(""),t(" --- "),t(""),t(" # Reference "),t(""),t(" - **公式ドキュメント**: https://ast-grep.github.io/ "),t(" - **Playground**: https://ast-grep.github.io/playground.html "),t(" - **パターン構文ガイド**: https://ast-grep.github.io/guide/pattern-syntax.html ")]),_:1},16))}};export{C as default};
